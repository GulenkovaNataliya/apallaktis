# üì∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Storage –¥–ª—è —Ñ–æ—Ç–æ —á–µ–∫–æ–≤

## –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Storage?

–î–ª—è **—Ä–∞—Å—Ö–æ–¥–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤** (–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç) –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å **—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —á–µ–∫–æ–≤**.
Supabase Storage - —ç—Ç–æ —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ —Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å Supabase Dashboard

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://supabase.com
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç **Apallaktis**
3. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Storage**

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å bucket –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

1. –ö–ª–∏–∫–Ω–∏—Ç–µ **New bucket**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   ```
   Name: receipt-photos
   Public bucket: ‚òëÔ∏è (–≤–∫–ª—é—á–∏—Ç—å!)
   File size limit: 5 MB
   Allowed MIME types: image/jpeg, image/png, image/webp
   ```
3. –ö–ª–∏–∫–Ω–∏—Ç–µ **Create bucket**

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (RLS)

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é bucket –ø—É—Å—Ç–æ–π –∏ –Ω–∏–∫—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã. –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏:

#### 3.1 –ü–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ (INSERT)

1. –í —Å–ø–∏—Å–∫–µ buckets –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ **receipt-photos**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **Policies**
3. –ö–ª–∏–∫–Ω–∏—Ç–µ **New Policy**
4. –í—ã–±–µ—Ä–∏—Ç–µ **Custom policy**
5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   ```
   Policy name: Users can upload receipts
   Target roles: authenticated
   Policy definition - INSERT:
   ```
   ```sql
   (bucket_id = 'receipt-photos'::text) AND (auth.uid() IS NOT NULL)
   ```
6. –ö–ª–∏–∫–Ω–∏—Ç–µ **Save**

#### 3.2 –ü–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è (SELECT)

1. –ö–ª–∏–∫–Ω–∏—Ç–µ **New Policy** –µ—â—ë —Ä–∞–∑
2. –í—ã–±–µ—Ä–∏—Ç–µ **Custom policy**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   ```
   Policy name: Anyone can view receipts
   Target roles: public
   Policy definition - SELECT:
   ```
   ```sql
   bucket_id = 'receipt-photos'::text
   ```
4. –ö–ª–∏–∫–Ω–∏—Ç–µ **Save**

#### 3.3 –ü–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (DELETE)

1. –ö–ª–∏–∫–Ω–∏—Ç–µ **New Policy** –µ—â—ë —Ä–∞–∑
2. –í—ã–±–µ—Ä–∏—Ç–µ **Custom policy**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   ```
   Policy name: Users can delete own receipts
   Target roles: authenticated
   Policy definition - DELETE:
   ```
   ```sql
   (bucket_id = 'receipt-photos'::text) AND (auth.uid() IS NOT NULL)
   ```
4. –ö–ª–∏–∫–Ω–∏—Ç–µ **Save**

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —á–µ–∫–æ–≤
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- ‚úÖ –£–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   cd frontend
   npm run dev
   ```

2. –û—Ç–∫—Ä—ã—Ç—å –æ–±—ä–µ–∫—Ç
3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ **ŒüŒπŒ∫ŒøŒΩŒøŒºŒπŒ∫Œ¨** (–§–∏–Ω–∞–Ω—Å—ã)
4. –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π —á–µ–∫–∞
5. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–æ—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Public bucket** = —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ
- –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å, —Å–Ω–∏–º–∏—Ç–µ –≥–∞–ª–æ—á–∫—É "Public bucket" –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏
- –§–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ: `receipt-photos/{objectId}/{timestamp}.{ext}`

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ 5 MB –Ω–∞ —Ñ–æ—Ç–æ
- **–§–æ—Ä–º–∞—Ç—ã**: JPEG, PNG, WebP
- **–°—Ç–æ–∏–º–æ—Å—Ç—å**: Supabase Free tier –≤–∫–ª—é—á–∞–µ—Ç 1 GB Storage –±–µ—Å–ø–ª–∞—Ç–Ω–æ

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-12-25
