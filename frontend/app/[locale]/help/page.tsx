"use client";

import { useState } from 'react';
import { useParams, useRouter } from "next/navigation";
import { messages, type Locale } from "@/lib/messages";
import Image from 'next/image';

// Section type
interface HelpSection {
  id: string;
  title: string;
  items: {
    title: string;
    content: string[];
    screenshots: string[];
  }[];
}

// Russian content
const helpContentRu: HelpSection[] = [
  {
    id: 'start',
    title: '1. Начало работы',
    items: [
      {
        title: '1.1 Страница выбора языка',
        content: [
          'При первом запуске приложения вы увидите страницу выбора языка.',
          '',
          'Приложение доступно на 8 языках:',
          '• Ελληνικά (Греческий)',
          '• Русский',
          '• Українська (Украинский)',
          '• Shqip (Албанский)',
          '• Български (Болгарский)',
          '• Română (Румынский)',
          '• English (Английский)',
          '• العربية (Арабский)',
          '',
          'Нажмите на кнопку с нужным языком — интерфейс переключится автоматически.',
          'Язык можно изменить позже в настройках.',
        ],
        screenshots: ['language-select.jpg'],
      },
      {
        title: '1.2 Установка на телефон',
        content: [
          'ΑΠΑΛΛΑΚΤΗΣ — это веб-приложение (PWA), которое работает как обычное приложение.',
          '',
          'Для установки на телефон:',
          '1. Откройте главную страницу приложения',
          '2. Найдите кнопку «Скачать приложение»',
          '3. Нажмите на неё',
          '4. Подтвердите установку в появившемся окне',
          '',
          'После установки иконка ΑΠΑΛΛΑΚΤΗΣ появится на главном экране вашего телефона.',
          'Приложение будет работать даже без интернета (офлайн-режим).',
        ],
        screenshots: ['1.ru.jpg'],
      },
      {
        title: '1.3 Главная страница',
        content: [
          'Главная страница — это точка входа в приложение.',
          '',
          'Здесь вы можете:',
          '• Войти в свой аккаунт (если уже зарегистрированы)',
          '• Создать новый аккаунт (регистрация)',
          '• Посмотреть тарифы и цены',
          '• Скачать приложение на телефон',
          '',
          'Если вы новый пользователь — нажмите «Регистрация».',
          'Если уже есть аккаунт — нажмите «Вход».',
        ],
        screenshots: ['2.ru.jpg'],
      },
      {
        title: '1.4 Регистрация',
        content: [
          'Для работы с приложением необходимо создать аккаунт.',
          '',
          'Шаг 1: Выберите тип документа',
          '• ΑΠΟΔΕΙΞΗ — для физических лиц (частные мастера)',
          '• ΤΙΜΟΛΟΓΙΟ — для компаний и юридических лиц',
          '',
          'Шаг 2: Заполните данные',
          '• Имя и Фамилия',
          '• Email (на него придёт подтверждение)',
          '• Телефон',
          '• Пароль (минимум 6 символов)',
          '',
          'Шаг 3: Для компаний (ΤΙΜΟΛΟΓΙΟ)',
          '• Введите ΑΦΜ (налоговый номер)',
          '• Данные компании заполнятся автоматически из базы ΑΑΔΕ',
          '',
          'Шаг 4: Код приглашения (необязательно)',
          '• Если вас пригласил друг — введите его код',
          '• Вы оба получите бонусный месяц',
          '',
          'Шаг 5: Нажмите «Зарегистрироваться»',
          '',
          'После регистрации проверьте почту и подтвердите email.',
        ],
        screenshots: ['3.ru.jpg', '4.ru.jpg', '5.ru.jpg', '6.ru.jpg'],
      },
      {
        title: '1.5 Вход в систему',
        content: [
          'Если у вас уже есть аккаунт:',
          '',
          '1. Откройте главную страницу',
          '2. Нажмите «Вход»',
          '3. Введите ваш Email',
          '4. Введите Пароль',
          '5. Нажмите кнопку «Войти»',
          '',
          'После успешного входа вы попадёте на главную панель (Dashboard).',
          '',
          'Если забыли пароль — нажмите «Забыли пароль?»',
        ],
        screenshots: ['7.ru.jpg'],
      },
      {
        title: '1.6 Сброс пароля',
        content: [
          'Если вы забыли пароль, его можно восстановить:',
          '',
          '1. На странице входа нажмите «Забыли пароль?»',
          '2. Введите email, который использовали при регистрации',
          '3. Нажмите «Отправить ссылку»',
          '4. Проверьте вашу почту (включая папку Спам)',
          '5. Откройте письмо и перейдите по ссылке',
          '6. Введите новый пароль (минимум 6 символов)',
          '7. Подтвердите новый пароль',
          '8. Нажмите «Сохранить»',
          '',
          'Теперь можете войти с новым паролем.',
        ],
        screenshots: ['8.ru.jpg', '9.ru.jpg'],
      },
    ],
  },
  {
    id: 'dashboard',
    title: '2. Главная панель',
    items: [
      {
        title: 'Обзор панели',
        content: [
          'После входа вы попадаете на главную панель:',
          '• Способы оплаты — как вам платят клиенты',
          '• Общие расходы — расходы на бизнес',
          '• Объекты — ваши проекты',
          '• Финансовый анализ — отчёты',
          '• Личный кабинет — настройки',
        ],
        screenshots: ['10.ru.jpg'],
      },
    ],
  },
  {
    id: 'payment-methods',
    title: '3. Способы оплаты',
    items: [
      {
        title: '3.1 Добавление способа оплаты',
        content: [
          '1. Нажмите «Добавить способ оплаты»',
          '2. Выберите тип:',
          '   • Наличные',
          '   • Кредитная карта',
          '   • Дебетовая карта',
          '   • Банковский счёт',
          '3. Введите название',
          '4. Нажмите «Сохранить»',
        ],
        screenshots: ['12.ru.jpg'],
      },
      {
        title: '3.2 Список способов оплаты',
        content: [
          'Здесь отображаются все ваши способы оплаты.',
        ],
        screenshots: ['11.ru.jpg'],
      },
    ],
  },
  {
    id: 'global-expenses',
    title: '4. Общие расходы',
    items: [
      {
        title: '4.1 Управление категориями',
        content: [
          'Категории помогают группировать расходы по типам.',
          '',
          'Чтобы создать категорию:',
          '1. Нажмите «Добавить категорию»',
          '2. Введите название (например: Инструменты, Транспорт, Материалы)',
          '3. Нажмите «Сохранить»',
          '',
          'Чтобы удалить категорию:',
          '• Нажмите на иконку корзины рядом с категорией',
          '• Подтвердите удаление',
        ],
        screenshots: ['13.ru.jpg', '14.ru.jpg'],
      },
      {
        title: '4.2 Список расходов',
        content: [
          'Все общие расходы отображаются по категориям.',
          '',
          'Для каждого расхода показано:',
          '• Дата',
          '• Сумма',
          '• Описание',
          '• Способ оплаты',
          '',
          'Нажмите на категорию, чтобы развернуть список расходов.',
        ],
        screenshots: ['15.ru.jpg'],
      },
      {
        title: '4.3 Добавление расхода',
        content: [
          'Чтобы добавить расход:',
          '1. Нажмите «Добавить расход»',
          '2. Выберите категорию',
          '3. Введите сумму',
          '4. Выберите способ оплаты',
          '5. Добавьте описание (необязательно)',
          '6. Нажмите «Сохранить»',
          '',
          'Удобные функции (Standard/Premium):',
          '• Голосовой ввод — скажите «Купил цемент за 50 евро»',
          '• Фото чека — сфотографируйте чек, данные заполнятся автоматически',
        ],
        screenshots: ['16.ru.jpg'],
      },
    ],
  },
  {
    id: 'objects',
    title: '5. Объекты и финансы',
    items: [
      {
        title: '5.1 Список объектов',
        content: [
          'Объекты — это ваши проекты (квартиры, дома, заказы).',
          '',
          'На странице показаны:',
          '• Открытые объекты (в работе)',
          '• Закрытые объекты (завершённые)',
          '',
          'Лимиты по тарифам:',
          '• Basic — 10 объектов',
          '• Standard — 50 объектов',
          '• Premium — без ограничений',
        ],
        screenshots: ['17.ru.jpg'],
      },
      {
        title: '5.2 Добавление объекта',
        content: [
          'Чтобы создать новый объект:',
          '1. Нажмите «Добавить объект»',
          '2. Введите название объекта',
          '3. Введите адрес (необязательно)',
          '4. Введите имя клиента',
          '5. Введите контакт клиента (телефон)',
          '6. Введите цену контракта',
          '7. Нажмите «Сохранить»',
        ],
        screenshots: ['18.ru.jpg'],
      },
      {
        title: '5.3 Дополнительные работы',
        content: [
          'Если клиент заказывает дополнительные работы:',
          '1. Откройте объект',
          '2. Перейдите в раздел «Финансы»',
          '3. Нажмите «Добавить работу»',
          '4. Введите описание работы',
          '5. Введите сумму',
          '6. Нажмите «Сохранить»',
          '',
          'Дополнительные работы добавляются к цене контракта.',
        ],
        screenshots: ['26.ru.jpg'],
      },
      {
        title: '5.4 Добавление платежа',
        content: [
          'Когда клиент платит:',
          '1. Откройте объект',
          '2. Перейдите в раздел «Финансы»',
          '3. Нажмите «Добавить оплату»',
          '4. Введите сумму',
          '5. Выберите способ оплаты',
          '6. Нажмите «Сохранить»',
          '',
          'Баланс объекта обновится автоматически.',
        ],
        screenshots: ['27.ru.jpg'],
      },
      {
        title: '5.5 Расходы объекта',
        content: [
          'Расходы на конкретный объект (материалы, субподрядчики):',
          '1. Откройте объект',
          '2. Перейдите в раздел «Финансы»',
          '3. Нажмите «Добавить расход»',
          '4. Выберите категорию',
          '5. Введите сумму',
          '6. Выберите способ оплаты',
          '7. Нажмите «Сохранить»',
          '',
          'Расходы объекта учитываются при расчёте прибыли.',
        ],
        screenshots: ['26.ru.jpg'],
      },
      {
        title: '5.6 Финансы объекта',
        content: [
          'Страница финансов показывает полную картину по объекту:',
          '',
          '• Цена контракта + дополнительные работы = Фактическая цена',
          '• Фактическая цена - Оплачено = Баланс',
          '• Фактическая цена - Расходы = Прибыль',
          '',
          'Цвета баланса:',
          '• Оранжевый — клиент должен',
          '• Зелёный — полностью оплачено',
          '• Светлый — переплата',
        ],
        screenshots: ['26.ru.jpg'],
      },
      {
        title: '5.7 Закрытие объекта',
        content: [
          'После завершения всех работ закройте объект:',
          '1. Откройте объект',
          '2. Нажмите «Закрыть объект»',
          '3. Подтвердите закрытие',
          '',
          'После закрытия:',
          '• Объект переместится в «Закрытые»',
          '• Рассчитается итоговая прибыль',
          '• Объект будет доступен в финансовом анализе',
        ],
        screenshots: ['26.ru.jpg'],
      },
    ],
  },
  {
    id: 'analysis',
    title: '6. Финансовый анализ',
    items: [
      {
        title: '6.1 Общий анализ',
        content: [
          'Финансовый анализ — это отчёты по вашему бизнесу.',
          '',
          'Что показывает анализ:',
          '• Общая сумма договорных цен',
          '• Общая сумма дополнительных работ',
          '• Общая сумма фактических цен',
          '• Общий баланс (сколько должны клиенты)',
          '• Общие расходы (глобальные + по объектам)',
          '• Общая прибыль',
          '',
          'Можно выбрать период для анализа.',
          '',
          'Цвета прибыли:',
          '• Зелёный — в плюсе',
          '• Оранжевый — в минусе',
        ],
        screenshots: ['26.ru.jpg'],
      },
      {
        title: '6.2 Экспорт отчётов',
        content: [
          'Отчёты можно скачать:',
          '',
          '• PDF — для печати или отправки клиенту',
          '• Excel — для дальнейшей работы с данными',
          '',
          'Нажмите кнопку «Скачать PDF» или «Скачать Excel».',
        ],
        screenshots: [],
      },
    ],
  },
  {
    id: 'profile',
    title: '7. Личный кабинет',
    items: [
      {
        title: '7.1 Меню личного кабинета',
        content: [
          'Личный кабинет содержит все настройки аккаунта:',
          '',
          '• Мои данные — личная информация',
          '• Сменить пароль — безопасность',
          '• Моя подписка — тариф и оплата',
          '• Моя команда — приглашённые пользователи',
          '• Referral Program — пригласить друзей',
          '• Поддержка — связаться с нами',
          '• Удалить аккаунт — удаление данных',
          '• Выход — выйти из аккаунта',
        ],
        screenshots: ['26.ru.jpg'],
      },
      {
        title: '7.2 Мои данные',
        content: [
          'Здесь можно просмотреть и изменить:',
          '',
          'Для физических лиц (ΑΠΟΔΕΙΞΗ):',
          '• Имя и Фамилия',
          '• Email',
          '• Телефон',
          '',
          'Для компаний (ΤΙΜΟΛΟΓΙΟ):',
          '• Название компании',
          '• ΑΦΜ (налоговый номер)',
          '• ΔΟΥ (налоговая инспекция)',
          '• Адрес',
          '• Email',
          '• Телефон',
        ],
        screenshots: ['27.ru.jpg', '28.jpg'],
      },
      {
        title: '7.3 Смена пароля',
        content: [
          'Чтобы изменить пароль:',
          '1. Введите текущий пароль',
          '2. Введите новый пароль (минимум 6 символов)',
          '3. Подтвердите новый пароль',
          '4. Нажмите «Сохранить»',
        ],
        screenshots: ['29.jpg'],
      },
    ],
  },
  {
    id: 'subscription',
    title: '8. Демо, аккаунт и подписка',
    items: [
      {
        title: '8.1 Моя подписка',
        content: [
          'На этой странице показано:',
          '• Текущий тариф (Demo / Basic / Standard / Premium)',
          '• Дата окончания подписки',
          '• Статус подписки (активна / истекла)',
          '',
          'Отсюда можно:',
          '• Продлить подписку',
          '• Изменить тариф',
          '• Управлять способом оплаты',
        ],
        screenshots: ['30.jpg'],
      },
      {
        title: '8.2 Демо версия',
        content: [
          'После регистрации вы получаете бесплатный демо-доступ на 48 часов.',
          '',
          '✅ Что доступно в демо:',
          '• Все функции приложения',
          '• Создание объектов (до 10)',
          '• Добавление расходов и платежей',
          '• Финансовый анализ',
          '• Экспорт в PDF и Excel',
          '',
          '❌ Ограничения демо:',
          '• Время: только 48 часов',
          '• После окончания — доступ блокируется',
          '',
          'После окончания демо:',
          '• Появится страница с предложением купить аккаунт',
          '• Ваши данные сохранятся',
          '• После покупки — полный доступ восстановится',
        ],
        screenshots: [],
      },
      {
        title: '8.3 Покупка аккаунта',
        content: [
          'Для начала работы нужно купить аккаунт.',
          '',
          'Цена: 62€ (с ΦΠΑ)',
          'Бонус: +1 месяц бесплатно',
          '',
          'После покупки вы получаете:',
          '• Доступ ко всем функциям',
          '• Возможность выбрать тариф',
          '• 1 месяц бесплатного использования',
        ],
        screenshots: ['31.jpg'],
      },
      {
        title: '8.4 Выбор плана',
        content: [
          'Доступны три тарифа (все цены с ΦΠΑ):',
          '',
          '━━━━━━━━━━━━━━━━━━━━━━━━',
          'BASIC — 24,80€/мес',
          '━━━━━━━━━━━━━━━━━━━━━━━━',
          '✅ Объекты: до 10',
          '✅ Пользователи: 1',
          '❌ Голосовой ввод',
          '❌ Фото чеков',
          '✅ Архив закрытых объектов',
          '✅ Финансовый анализ объекта',
          '✅ Полный финансовый анализ',
          '✅ Экспорт в Excel',
          '✅ Экспорт в PDF',
          '✅ Безлимитный Referral: Бонус +1 месяц',
          '✅ Поддержка в течение 48ч',
          '',
          '━━━━━━━━━━━━━━━━━━━━━━━━',
          'STANDARD — 49,60€/мес',
          '━━━━━━━━━━━━━━━━━━━━━━━━',
          '✅ Объекты: до 50',
          '✅ Пользователи: 2',
          '✅ Голосовой ввод',
          '✅ Фото чеков',
          '✅ Архив закрытых объектов',
          '✅ Финансовый анализ объекта',
          '✅ Полный финансовый анализ',
          '✅ Экспорт в Excel',
          '✅ Экспорт в PDF',
          '✅ Безлимитный Referral: Бонус +1 месяц',
          '✅ Поддержка в течение 48ч',
          '',
          '━━━━━━━━━━━━━━━━━━━━━━━━',
          'PREMIUM — 93,00€/мес',
          '━━━━━━━━━━━━━━━━━━━━━━━━',
          '✅ Объекты: Без ограничений',
          '✅ Пользователи: Без ограничений',
          '✅ Голосовой ввод',
          '✅ Фото чеков',
          '✅ Архив закрытых объектов',
          '✅ Финансовый анализ объекта',
          '✅ Полный финансовый анализ',
          '✅ Экспорт в Excel',
          '✅ Экспорт в PDF',
          '✅ Безлимитный Referral: Бонус +1 месяц',
          '✅ Поддержка в течение 48ч',
        ],
        screenshots: ['32.jpg'],
      },
    ],
  },
  {
    id: 'team',
    title: '9. Команда и поддержка',
    items: [
      {
        title: '9.1 Referral Program',
        content: [
          'Приглашайте друзей и получайте бонусы!',
          '',
          'Как это работает:',
          '1. Скопируйте ваш реферальный код',
          '2. Отправьте его другу',
          '3. Друг регистрируется с вашим кодом',
          '4. Вы оба получаете +1 месяц бесплатно',
          '',
          'Реферальная программа доступна только после покупки аккаунта.',
        ],
        screenshots: ['33.jpg'],
      },
      {
        title: '9.2 Моя команда',
        content: [
          'Приглашайте сотрудников работать вместе.',
          '',
          'Чтобы добавить члена команды:',
          '1. Нажмите «Пригласить»',
          '2. Введите email сотрудника',
          '3. Нажмите «Отправить приглашение»',
          '',
          'Лимиты по тарифам:',
          '• Basic — 1 пользователь (только вы)',
          '• Standard — 2 пользователя',
          '• Premium — 5 пользователей',
        ],
        screenshots: ['34.jpg'],
      },
      {
        title: '9.3 Поддержка',
        content: [
          'Нужна помощь? Свяжитесь с нами!',
          '',
          'Способы связи:',
          '• Viber',
          '• WhatsApp',
          '',
          'Время ответа: в течение 48 часов.',
          '',
          'Мы говорим на греческом, русском и английском.',
        ],
        screenshots: ['35.jpg'],
      },
      {
        title: '9.4 Удаление аккаунта',
        content: [
          '⚠️ ВНИМАНИЕ: Это действие необратимо!',
          '',
          'При удалении аккаунта:',
          '• Все ваши данные будут удалены',
          '• Все объекты и расходы будут удалены',
          '• Подписка будет отменена',
          '• Восстановление невозможно',
          '',
          'Чтобы удалить аккаунт:',
          '1. Нажмите «Удалить аккаунт»',
          '2. Введите пароль для подтверждения',
          '3. Нажмите «Удалить навсегда»',
        ],
        screenshots: ['36.jpg'],
      },
    ],
  },
];

export default function HelpPage() {
  const params = useParams();
  const router = useRouter();
  const locale = (params.locale as Locale) || "el";
  const t = messages[locale]?.help || messages.el.help;

  // Expanded sections state
  const [expandedSections, setExpandedSections] = useState<Set<string>>(new Set());
  const [expandedItems, setExpandedItems] = useState<Set<string>>(new Set());

  const toggleSection = (sectionId: string) => {
    const newExpanded = new Set(expandedSections);
    if (newExpanded.has(sectionId)) {
      newExpanded.delete(sectionId);
    } else {
      newExpanded.add(sectionId);
    }
    setExpandedSections(newExpanded);
  };

  const toggleItem = (itemId: string) => {
    const newExpanded = new Set(expandedItems);
    if (newExpanded.has(itemId)) {
      newExpanded.delete(itemId);
    } else {
      newExpanded.add(itemId);
    }
    setExpandedItems(newExpanded);
  };

  // Get screenshot path based on locale
  const getScreenshotPath = (filename: string) => {
    // language-select.jpg is in root /help/ folder
    if (filename === 'language-select.jpg') {
      return `/help/${filename}`;
    }
    // All other screenshots are in /help/ru/
    return `/help/ru/${filename}`;
  };

  // For now, use Russian content for Russian locale
  const helpContent = helpContentRu;

  return (
    <div
      className="min-h-screen flex flex-col"
      style={{
        backgroundColor: '#033a45',
        paddingTop: '40px',
        paddingBottom: '120px',
        paddingLeft: '40px',
        paddingRight: '40px'
      }}
    >
      {/* Back - at top with normal padding */}
      <p
        onClick={() => router.push(`/${locale}`)}
        className="text-subheading cursor-pointer"
        style={{ color: 'var(--polar)', marginBottom: '48px', fontSize: '18px' }}
      >
        {t.back}
      </p>

      {/* Logo at top */}
      <div className="flex justify-center" style={{ marginBottom: '48px' }}>
        <Image
          src="/Apallaktis.photos/apallaktis-logo-orange@2x.png"
          alt="ΑΠΑΛΛΑΚΤΗΣ"
          width={450}
          height={150}
          style={{ objectFit: 'contain' }}
        />
      </div>

      {/* Intro text */}
      <div className="flex flex-col items-center gap-12">
        <p
          className="text-center"
          style={{ color: 'var(--polar)', fontWeight: 500, fontSize: '16px' }}
        >
          Мобильное приложение, которое освобождает мастера от рутины учёта финансов.
        </p>

        <p
          className="text-center"
          style={{ color: 'var(--polar)', fontWeight: 500, fontSize: '16px' }}
        >
          ΑΠΑΛΛΑΚΤΗΣ — «освободитель»
        </p>

        <p
          className="text-center"
          style={{ color: 'var(--orange)', fontSize: '24px', fontWeight: 500 }}
        >
          "Τέλος στη ρουτίνα!"
        </p>

        <p
          className="text-center"
          style={{ color: 'var(--polar)', fontWeight: 500, fontSize: '16px' }}
        >
          — "Конец рутине!"
        </p>
      </div>

      {/* Disclaimer - white text, no orange background */}
      <div
        className="text-center"
        style={{ marginTop: '48px', marginBottom: '48px' }}
      >
        <p className="font-semibold" style={{ color: 'white', fontSize: '18px' }}>
          Это НЕ бухгалтерская программа
        </p>
        <p className="mt-2" style={{ color: 'var(--polar)', fontSize: '14px' }}>
          Это персональный инструмент финансового контроля
        </p>
      </div>

      {/* Title */}
      <h1
        className="text-3xl font-bold text-center"
        style={{ color: 'var(--polar)', marginBottom: '48px' }}
      >
        Инструкция
      </h1>

      {/* Sections */}
      <div className="flex flex-col gap-4">
          {helpContent.map((section, sectionIndex) => {
            const isSectionExpanded = expandedSections.has(section.id);

            return (
              <div key={section.id}>
                {/* Section Header */}
                <button
                  onClick={() => toggleSection(section.id)}
                  className="w-full rounded-2xl flex justify-between items-center"
                  style={{
                    backgroundColor: 'var(--polar)',
                    padding: '16px 20px',
                    minHeight: '52px'
                  }}
                >
                  <span
                    className="font-bold"
                    style={{ color: 'var(--deep-teal)', fontSize: '18px' }}
                  >
                    {section.title}
                  </span>
                  <span style={{ color: 'var(--deep-teal)', fontSize: '20px' }}>
                    {isSectionExpanded ? '▲' : '▼'}
                  </span>
                </button>

                {/* Section Items */}
                {isSectionExpanded && (
                  <div className="mt-2 flex flex-col gap-2 pl-2">
                    {section.items.map((item, itemIndex) => {
                      const itemId = `${section.id}-${itemIndex}`;
                      const isItemExpanded = expandedItems.has(itemId);

                      return (
                        <div key={itemId}>
                          {/* Item Header */}
                          <button
                            onClick={() => toggleItem(itemId)}
                            className="w-full rounded-2xl flex justify-between items-center"
                            style={{
                              backgroundColor: 'var(--zanah)',
                              padding: '12px 16px',
                              minHeight: '44px'
                            }}
                          >
                            <span
                              className="font-semibold text-left"
                              style={{ color: 'var(--deep-teal)', fontSize: '16px' }}
                            >
                              {item.title}
                            </span>
                            <span style={{ color: 'var(--deep-teal)', fontSize: '16px' }}>
                              {isItemExpanded ? '▲' : '▼'}
                            </span>
                          </button>

                          {/* Item Content */}
                          {isItemExpanded && (
                            <div
                              className="mt-2 rounded-2xl"
                              style={{
                                backgroundColor: 'rgba(255,255,255,0.9)',
                                padding: '16px'
                              }}
                            >
                              {/* Screenshots */}
                              {item.screenshots.length > 0 && (
                                <div className="flex flex-col gap-2 mb-4">
                                  {item.screenshots.map((screenshot, idx) => (
                                    <div
                                      key={idx}
                                      className="rounded-lg overflow-hidden"
                                      style={{
                                        border: '2px solid var(--skeptic)',
                                        backgroundColor: '#f5f5f5'
                                      }}
                                    >
                                      <Image
                                        src={getScreenshotPath(screenshot)}
                                        alt={`${item.title} - ${idx + 1}`}
                                        width={400}
                                        height={300}
                                        style={{
                                          width: '100%',
                                          height: 'auto',
                                          objectFit: 'contain'
                                        }}
                                        onError={(e) => {
                                          // Hide broken images
                                          (e.target as HTMLImageElement).style.display = 'none';
                                        }}
                                      />
                                    </div>
                                  ))}
                                </div>
                              )}

                              {/* Text Content */}
                              <div className="flex flex-col gap-1">
                                {item.content.map((line, lineIdx) => (
                                  <p
                                    key={lineIdx}
                                    style={{
                                      color: line.startsWith('━') ? 'var(--orange)' : 'var(--deep-teal)',
                                      fontSize: line.includes('€/мес') ? '16px' : '14px',
                                      fontWeight: line.includes('€/мес') ? 600 : 400,
                                      paddingLeft: line.startsWith('•') || line.startsWith('   ') || line.startsWith('✅') || line.startsWith('❌') ? '12px' : '0',
                                      marginTop: line.startsWith('━') ? '8px' : '0'
                                    }}
                                  >
                                    {line}
                                  </p>
                                ))}
                              </div>
                            </div>
                          )}
                        </div>
                      );
                    })}
                  </div>
                )}
              </div>
            );
          })}
        </div>

    </div>
  );
}
